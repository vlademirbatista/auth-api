<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <title>Login - FDS</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background: #0f172a;
            color: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
        }
        .card {
            background: #020617;
            border: 1px solid #1e293b;
            border-radius: 12px;
            padding: 24px 28px;
            width: 320px;
            box-shadow: 0 20px 40px rgba(15,23,42,0.8);
        }
        h1 {
            font-size: 20px;
            margin-top: 0;
            margin-bottom: 16px;
            text-align: center;
        }
        label {
            display: block;
            font-size: 12px;
            margin-bottom: 4px;
            color: #9ca3af;
        }
        input {
            width: 100%;
            padding: 8px 10px;
            margin-bottom: 12px;
            border-radius: 6px;
            border: 1px solid #334155;
            background: #020617;
            color: #e5e7eb;
            box-sizing: border-box;
        }
        input:focus {
            outline: none;
            border-color: #38bdf8;
            box-shadow: 0 0 0 1px #38bdf8;
        }
        button {
            width: 100%;
            padding: 10px;
            border-radius: 6px;
            border: none;
            background: #38bdf8;
            color: #0f172a;
            font-weight: 600;
            cursor: pointer;
        }
        button:hover {
            background: #0ea5e9;
        }
        .status {
            margin-top: 12px;
            font-size: 13px;
            text-align: center;
        }
        .status.ok {
            color: #4ade80;
        }
        .status.error {
            color: #f97373;
        }
    </style>
</head>
<body>
<div class="card">
    <h1>Login FDS</h1>

    <form id="loginForm">
        <label for="email">E-mail</label>
        <input id="email" type="email" required />

        <label for="senha">Senha</label>
        <input id="senha" type="password" required />

        <button type="submit">Entrar</button>
    </form>

    <div id="status" class="status"></div>
</div>

<script>
    const form = document.getElementById('loginForm');
    const statusDiv = document.getElementById('status');

    form.addEventListener('submit', async (event) => {
        event.preventDefault(); // não recarrega a página

        statusDiv.textContent = 'Enviando...';
        statusDiv.className = 'status';

        const email = document.getElementById('email').value;
        const senha = document.getElementById('senha').value;

        try {
            const response = await fetch('/api/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ email, senha })
            });

            const body = await response.json().catch(() => ({}));

            if (response.ok) {
                statusDiv.textContent = body.message || 'Login OK';
                statusDiv.className = 'status ok';
            } else {
                statusDiv.textContent = body.message || 'Falha no login';
                statusDiv.className = 'status error';
            }
        } catch (err) {
            console.error(err);
            statusDiv.textContent = 'Erro ao conectar com a API';
            statusDiv.className = 'status error';
        }
    });
</script>
</body>
</html>